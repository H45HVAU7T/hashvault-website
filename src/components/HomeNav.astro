---
import HashFill from "./HashFill.astro";

const navLinks = [
  { label: "/ABOUT-US", href: "/about" },
  { label: "/EVENTS", href: "/events" },
  { label: "/HASHLABS", href: "https://hashlabs.hashvault.club/", external: true },
  { label: "/RESOURCES", href: "/vault/hv-resources" },
  { label: "/HALL-OF-FAME", href: "/vault/hv-hof" },
  { label: "/CONTACT", href: "mailto:contact@hashvault.club" },
];
---

<nav
  class="bg-hash-black/30 divide-hash-purple z-[60] flex flex-col items-center justify-between divide-y-2 leading-none backdrop-blur-xs xl:h-30 xl:flex-row xl:divide-x-2 xl:divide-y-0"
>
  <div class="font-brutal md:text-md hidden h-full w-full px-5 py-4 text-sm font-black xl:block">
    <ul class="grid h-full grid-flow-col grid-rows-3 items-center">
      {navLinks.map((link, i) => (
        <a
          class={`w-fit transition duration-100 hover:opacity-75 ${
            i % 3 === 0 ? "self-start" : i % 3 === 1 ? "" : "self-end"
          }`}
          href={link.href}
          target={link.external ? "_blank" : undefined}
          rel={link.external ? "noopener noreferrer" : undefined}
        >
          {link.label}
        </a>
      ))}
    </ul>
  </div>

  <div
    x-data="{ open: false }"
    class="font-brutal text-md md:text-md relative z-50 flex w-full flex-col items-center justify-between gap-2 px-3 py-2 font-black xl:hidden"
  >
    <div class="flex w-full items-center justify-between">
      <div>/HOME</div>
      <button @click="open = !open" aria-label="Toggle Menu">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-menu"
        >
          <path d="M4 12h16"></path>
          <path d="M4 18h16"></path>
          <path d="M4 6h16"></path>
        </svg>
      </button>
    </div>

    <div
      x-cloak
      x-show="open"
      @click.outside="open = false"
      x-transition:enter="transition ease-out duration-100"
      x-transition:enter-start="opacity-0 translate-y-1"
      x-transition:enter-end="opacity-100 translate-y-0"
      x-transition:leave="transition ease-in duration-100"
      x-transition:leave-start="opacity-100 translate-y-0"
      x-transition:leave-end="opacity-0 translate-y-1"
      class="bg-hash-black border-hash-purple absolute top-full flex w-full flex-col items-start gap-2 border-b-2 px-3 py-4 backdrop-blur-md"
    >
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="transition active:opacity-75"
          target={link.external ? "_blank" : undefined}
          rel={link.external ? "noopener noreferrer" : undefined}
          @click="open = false"
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>

  <div class="w-full px-3 pt-2 pb-3 xl:px-5 xl:py-4">
    <div class="grid w-full grid-rows-1 gap-1 align-top xl:gap-4">
      <div class="flex h-fit items-center gap-2 overflow-hidden">
        <h3 class="font-brutal text-sm whitespace-nowrap">LATEST UPDATES</h3>
        <HashFill textSize="text-sm" />
      </div>

      <div
        class="scrollbar scrollbar-thumb-transparent scrollbar-track-transparent flex w-full snap-x gap-2 overflow-x-auto md:mx-auto md:items-center md:overflow-x-visible"
      >
        <div class="border-hash-purple h-full w-full border-2 p-2">
          <p class="text-center font-mono text-xs text-clip hyphens-auto">
            Coming Soon
          </p>
        </div>
      </div>
    </div>
  </div>
</nav>

<style>
  [x-cloak] {
    display: none !important;
  }
</style>
